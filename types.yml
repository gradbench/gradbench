doc: Types for the GradBench intermediate representation.
types:
  ModuleId:
    doc: A unique identifier for a module.
    string:
  TypeId:
    doc: The index of a type in a module's list of types.
    uint:
  FieldId:
    doc: The index of an element of a product type.
    uint:
  VariantId:
    doc: The index of a variant of a sum type.
    uint:
  FunctionId:
    doc: The index of a function in a module's list of functions.
    uint:
  LocalId:
    doc: The index of a local variable in a function's list of locals.
    uint:
  Expression:
    doc: An expression.
    enum:
      Save:
        doc: Set the value of a local variable and yield unit.
        record:
          id:
            doc: The index of the local variable.
            type: LocalId
          value:
            doc: The value.
            type: Expression
      Local:
        doc: Get a reference to a local variable.
        record:
          id:
            doc: The index of the local variable.
            type: LocalId
      Unit:
        doc: The literal unit value.
      True:
        doc: The literal Boolean true value.
      False:
        doc: The literal Boolean false value.
      Int32:
        doc: A literal 32-bit signed integer.
        record:
          value:
            doc: The integer value.
            int32:
      Float64:
        doc: A literal 64-bit IEEE 754 floating point number.
        record:
          value:
            doc: The floating point value.
            float64:
      Store:
        doc: Store a value and yield a reference to it.
        record:
          value:
            doc: The value to store.
            type: Expression
      Get:
        doc: Dereference a reference.
        record:
          ref:
            doc: The reference.
            type: Expression
      Set:
        doc: Mutate through a reference and yield unit.
        record:
          ref:
            doc: The reference.
            type: Expression
          value:
            doc: The new value.
            type: Expression
      Array:
        doc: Create and yield an array value.
        record:
          length:
            doc: The number of elements in the array.
            type: Expression
          element:
            doc: The initial value to copy for all elements.
            type: Expression
      Element:
        doc: Get a reference to an element of an array.
        record:
          array:
            doc: An array.
            type: Expression
          index:
            doc: The index of the element.
            type: Expression
      Record:
        doc: Create and yield a record value.
        record:
          type:
            doc: The type of the record.
            type: TypeId
          fields:
            doc: The values of the fields.
            list:
              doc: A single field of the record.
              type: Expression
      Field:
        doc: Get a reference to a field of a record.
        record:
          record:
            doc: A reference to a record.
            type: Expression
          field:
            doc: The index of the field.
            type: FieldId
      Enum:
        doc: Create and yield an enum value.
        record:
          type:
            doc: The type of the enum.
            type: TypeId
          variant:
            doc: The index of the variant.
            type: VariantId
          value:
            doc: The value for the data in that variant.
            type: Expression
      Match:
        doc: Match on an enum value.
        record:
          value:
            doc: A reference to an enum value.
            type: Expression
          cases:
            doc: Match cases for all the variants.
            list:
              doc: A single case to match against.
              record:
                parameter:
                  doc: The local variable to set with a reference to the data.
                  type: LocalId
                body:
                  doc: The body of the case.
                  type: Expression
      If:
        doc: Yield the value of one of two expressions based on a condition.
        record:
          condition:
            doc: The condition to evaluate.
            type: Expression
          then:
            doc: The expression to evaluate if the condition is true.
            type: Expression
          else:
            doc: The expression to evaluate if the condition is false.
            type: Expression
      Block:
        doc: Evaluate a sequence of expressions, yielding the last value.
        record:
          body:
            doc: The expressions to evaluate.
            list:
              doc: An expression in the sequence.
              type: Expression
          last:
            doc: The final expression to evaluate, yielding its value.
            type: Expression
      Call:
        doc: Call a function and yield its returned value.
        record:
          function:
            doc: The function to call.
            type: FunctionId
          argument:
            doc: The argument to pass to the function.
            type: Expression
  Module:
    doc: A module, which contains some number of functions.
    record:
      id:
        doc: The unique identifier for this module.
        type: ModuleId
      imports:
        doc: Other modules imported by this module.
        list:
          doc: An imported module.
          record:
            id:
              doc: The unique identifier for the imported module.
              type: ModuleId
      traits:
        doc: The traits defined in this module.
        list:
          doc: A trait definition.
      types:
        doc: The types in this module.
        list:
          doc: A type.
          record:
            name:
              optional:
              doc: A custom name for this type.
              string:
            definition:
              doc: The definition of this type.
              enum:
                Unit:
                  doc: The unit type.
                Bool:
                  doc: The Boolean type.
                Int32:
                  doc: The 32-bit signed integer type.
                Float64:
                  doc: The 64-bit IEEE 754 floating point type.
                Reference:
                  doc: A reference type.
                  record:
                    target:
                      doc: The type that this reference points to.
                      type: TypeId
                Array:
                  doc: An array type.
                  record:
                    element:
                      doc: The type of the elements of this array.
                      type: TypeId
                Record:
                  doc: A product type.
                  record:
                    fields:
                      doc: The fields of this record.
                      list:
                        doc: A single field of the record.
                        record:
                          name:
                            optional:
                            doc: The name of this field.
                            string:
                          type:
                            doc: The type of this field.
                            type: TypeId
                Enum:
                  doc: A sum type.
                  record:
                    variants:
                      doc: The variants of this enum.
                      list:
                        doc: A single variant of the enum.
                        record:
                          name:
                            optional:
                            doc: The name of this variant.
                            string:
                          type:
                            doc: The type of this variant.
                            type: TypeId
      functions:
        doc: The functions defined in this module.
        list:
          doc: A function definition.
          record:
            name:
              optional:
              doc: The name of this function.
              string:
            locals:
              doc: The local variables of this function.
              list:
                doc: A local variable in a function.
                record:
                  name:
                    optional:
                    doc: The name of this local variable.
                    string:
                  type:
                    doc: The type of this local variable.
                    type: TypeId
            parameter:
              doc: The parameter of this function.
              record:
                local:
                  doc: The local variable that this parameter binds to.
                  type: LocalId
            return:
              doc: The return type of this function.
              type: TypeId
            body:
              doc: The body of this function.
              type: Expression
